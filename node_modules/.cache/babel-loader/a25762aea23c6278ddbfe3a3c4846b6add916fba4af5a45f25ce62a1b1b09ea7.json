{"ast":null,"code":"'use strict';\n\nconst {\n  pipeline\n} = require('./pipeline');\nconst Duplex = require('./duplex');\nconst {\n  destroyer\n} = require('./destroy');\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable\n} = require('./utils');\nconst {\n  AbortError,\n  codes: {\n    ERR_INVALID_ARG_VALUE,\n    ERR_MISSING_ARGS\n  }\n} = require('../../ours/errors');\nmodule.exports = function compose() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0]);\n  }\n  const orgStreams = [...streams];\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0]);\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1;\n    streams[idx] = Duplex.from(streams[idx]);\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue;\n    }\n    if (n < streams.length - 1 && !isReadable(streams[n])) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable');\n    }\n    if (n > 0 && !isWritable(streams[n])) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable');\n    }\n  }\n  let ondrain;\n  let onfinish;\n  let onreadable;\n  let onclose;\n  let d;\n  function onfinished(err) {\n    const cb = onclose;\n    onclose = null;\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      d.destroy(err);\n    } else if (!readable && !writable) {\n      d.destroy();\n    }\n  }\n  const head = streams[0];\n  const tail = pipeline(streams, onfinished);\n  const writable = !!isWritable(head);\n  const readable = !!isReadable(tail);\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.writableObjectMode),\n    writable,\n    readable\n  });\n  if (writable) {\n    d._write = function (chunk, encoding, callback) {\n      if (head.write(chunk, encoding)) {\n        callback();\n      } else {\n        ondrain = callback;\n      }\n    };\n    d._final = function (callback) {\n      head.end();\n      onfinish = callback;\n    };\n    head.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain;\n        ondrain = null;\n        cb();\n      }\n    });\n    tail.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish;\n        onfinish = null;\n        cb();\n      }\n    });\n  }\n  if (readable) {\n    tail.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable;\n        onreadable = null;\n        cb();\n      }\n    });\n    tail.on('end', function () {\n      d.push(null);\n    });\n    d._read = function () {\n      while (true) {\n        const buf = tail.read();\n        if (buf === null) {\n          onreadable = d._read;\n          return;\n        }\n        if (!d.push(buf)) {\n          return;\n        }\n      }\n    };\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError();\n    }\n    onreadable = null;\n    ondrain = null;\n    onfinish = null;\n    if (onclose === null) {\n      callback(err);\n    } else {\n      onclose = callback;\n      destroyer(tail, err);\n    }\n  };\n  return d;\n};","map":{"version":3,"names":["pipeline","require","Duplex","destroyer","isNodeStream","isReadable","isWritable","AbortError","codes","ERR_INVALID_ARG_VALUE","ERR_MISSING_ARGS","module","exports","compose","streams","length","from","orgStreams","idx","n","ondrain","onfinish","onreadable","onclose","d","onfinished","err","cb","destroy","readable","writable","head","tail","writableObjectMode","undefined","readableObjectMode","_write","chunk","encoding","callback","write","_final","end","on","push","_read","buf","read","_destroy"],"sources":["G:/To-do-List_App-main/node_modules/n3/node_modules/readable-stream/lib/internal/streams/compose.js"],"sourcesContent":["'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst { isNodeStream, isReadable, isWritable } = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (n < streams.length - 1 && !isReadable(streams[n])) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !isWritable(streams[n])) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!isWritable(head)\n  const readable = !!isReadable(tail)\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.writableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    d._write = function (chunk, encoding, callback) {\n      if (head.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      head.end()\n      onfinish = callback\n    }\n    head.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    tail.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    tail.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    tail.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = tail.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(tail, err)\n    }\n  }\n  return d\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}