{"ast":null,"code":"'use strict';\n\nvar _require = require('../../ours/errors'),\n  AbortError = _require.AbortError,\n  codes = _require.codes;\nvar eos = require('./end-of-stream');\nvar ERR_INVALID_ARG_TYPE = codes.ERR_INVALID_ARG_TYPE;\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nvar validateAbortSignal = function validateAbortSignal(signal, name) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal);\n  }\n};\nfunction isNodeStream(obj) {\n  return !!(obj && typeof obj.pipe === 'function');\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal');\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', 'stream.Stream', stream);\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream);\n};\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream;\n  }\n  var onAbort = function onAbort() {\n    stream.destroy(new AbortError(undefined, {\n      cause: signal.reason\n    }));\n  };\n  if (signal.aborted) {\n    onAbort();\n  } else {\n    signal.addEventListener('abort', onAbort);\n    eos(stream, function () {\n      return signal.removeEventListener('abort', onAbort);\n    });\n  }\n  return stream;\n};","map":{"version":3,"names":["require","AbortError","codes","eos","ERR_INVALID_ARG_TYPE","validateAbortSignal","signal","name","isNodeStream","obj","pipe","module","exports","addAbortSignal","stream","addAbortSignalNoValidate","onAbort","destroy","undefined","cause","reason","aborted","addEventListener","removeEventListener"],"sources":["E:/react-todo-app/node_modules/n3/node_modules/readable-stream/lib/internal/streams/add-abort-signal.js"],"sourcesContent":["'use strict'\n\nconst { AbortError, codes } = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nfunction isNodeStream(obj) {\n  return !!(obj && typeof obj.pipe === 'function')\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', 'stream.Stream', stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = () => {\n    stream.destroy(\n      new AbortError(undefined, {\n        cause: signal.reason\n      })\n    )\n  }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    signal.addEventListener('abort', onAbort)\n    eos(stream, () => signal.removeEventListener('abort', onAbort))\n  }\n  return stream\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,eAA8BA,OAAO,CAAC,mBAAmB,CAAC;EAAlDC,UAAU,YAAVA,UAAU;EAAEC,KAAK,YAALA,KAAK;AACzB,IAAMC,GAAG,GAAGH,OAAO,CAAC,iBAAiB,CAAC;AACtC,IAAQI,oBAAoB,GAAKF,KAAK,CAA9BE,oBAAoB;;AAE5B;AACA;AACA;AACA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAIC,MAAM,EAAEC,IAAI,EAAK;EAC5C,IAAI,OAAOD,MAAM,KAAK,QAAQ,IAAI,EAAE,SAAS,IAAIA,MAAM,CAAC,EAAE;IACxD,MAAM,IAAIF,oBAAoB,CAACG,IAAI,EAAE,aAAa,EAAED,MAAM,CAAC;EAC7D;AACF,CAAC;AACD,SAASE,YAAY,CAACC,GAAG,EAAE;EACzB,OAAO,CAAC,EAAEA,GAAG,IAAI,OAAOA,GAAG,CAACC,IAAI,KAAK,UAAU,CAAC;AAClD;AACAC,MAAM,CAACC,OAAO,CAACC,cAAc,GAAG,SAASA,cAAc,CAACP,MAAM,EAAEQ,MAAM,EAAE;EACtET,mBAAmB,CAACC,MAAM,EAAE,QAAQ,CAAC;EACrC,IAAI,CAACE,YAAY,CAACM,MAAM,CAAC,EAAE;IACzB,MAAM,IAAIV,oBAAoB,CAAC,QAAQ,EAAE,eAAe,EAAEU,MAAM,CAAC;EACnE;EACA,OAAOH,MAAM,CAACC,OAAO,CAACG,wBAAwB,CAACT,MAAM,EAAEQ,MAAM,CAAC;AAChE,CAAC;AACDH,MAAM,CAACC,OAAO,CAACG,wBAAwB,GAAG,UAAUT,MAAM,EAAEQ,MAAM,EAAE;EAClE,IAAI,OAAOR,MAAM,KAAK,QAAQ,IAAI,EAAE,SAAS,IAAIA,MAAM,CAAC,EAAE;IACxD,OAAOQ,MAAM;EACf;EACA,IAAME,OAAO,GAAG,SAAVA,OAAO,GAAS;IACpBF,MAAM,CAACG,OAAO,CACZ,IAAIhB,UAAU,CAACiB,SAAS,EAAE;MACxBC,KAAK,EAAEb,MAAM,CAACc;IAChB,CAAC,CAAC,CACH;EACH,CAAC;EACD,IAAId,MAAM,CAACe,OAAO,EAAE;IAClBL,OAAO,EAAE;EACX,CAAC,MAAM;IACLV,MAAM,CAACgB,gBAAgB,CAAC,OAAO,EAAEN,OAAO,CAAC;IACzCb,GAAG,CAACW,MAAM,EAAE;MAAA,OAAMR,MAAM,CAACiB,mBAAmB,CAAC,OAAO,EAAEP,OAAO,CAAC;IAAA,EAAC;EACjE;EACA,OAAOF,MAAM;AACf,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}